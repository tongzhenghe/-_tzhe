<?php/** * Created by PhpStorm. * User: Administrator * Date: 2019/4/1 * Time: 9:54 */namespace app\admin\model\system;use basic\ModelBasic;use think\Session;use traits\controller\Jump;class SystemAdmin extends  ModelBasic{    use Jump;    /**     *  保存当前登陆用户信息     */    public static function setUserInfo($adminInfo)    {        Session::set('adminId',$adminInfo['id']);        Session::set('adminInfo',$adminInfo);    }    /**     * 清空当前登陆用户信息     */    public static function clearLoginInfo()    {        if(!is_dir('./tmp/'))mkdir ('./tmp/', 0700);        session_save_path('./tmp/');        Session::delete('adminInfo');        Session::delete('adminId');        Session::clear();    }    /**     * 检查用户登陆状态     * @return bool     */    public static function hasActiveAdmin()    {        return  Session::has('adminInfo') && Session::has('adminId');    }    /**     * 获得登陆用户信息     * @return mixed     */    public static function activeAdminInfoOrFail()    {        if(!is_dir('./tmp/'))mkdir ('./tmp/', 0700);        session_save_path('./tmp/');        $adminInfo = Session::get('adminInfo');        $SystemAdmin = new SystemAdmin();        if(empty($adminInfo)) $SystemAdmin->redirect(url('sign/signin'));        if (!empty($adminInfo)) {            if( $adminInfo['state'] === 2) $SystemAdmin->redirect(url('sign/signin'));        }        return $adminInfo;    }}